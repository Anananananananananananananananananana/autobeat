import json
import random
import Utils
from Utils import noteJSON as nJ
from Utils import generateCutPath as cP
from Utils import generateNoteTimesFromDat as times

# actually store probabilities
noteDict = {
    '3110': ['7011', 'b011', '3011', 'a011', 'a411', '2011', '6011', '9011', '1011', '7511', '5011', 'b511', '9411', '2511', 'b411'],
    '0100': ['4001', '8001', '1001', '9001', '8401', '5001', '9501', '5501', '0001', 'a001', 'a501', '4401', '2001', '6001', '9401', '4501', '6501'],
    '7011': ['2110', '1610', '2610', '3110', '1110', 'a710', '3610', '4210', '6110', 'b110', '7110', 'b710', 'a610', '9110', '0610', 'a110', 'b610', '7710', '5710', '6610', '7610', '5610', '5110', '6710', '3710', '9610', '1210', '0210', '2210'],
    '4001': ['1100', '1700', '2100', '5700', '2300', '2700', '6700', '4100', '0100', '8100', '9100', '5100', '4600', '3700', 'a100', '4700', '9700', '8700', '6600', '0600', '6100', '7700', '9600', '1300', '4300', '3300', 'a700'],
    '2110': ['7011', 'a011', 'b011', '7511', 'b511', '9011', '3011', '2011', '7311', '6011', '3511', '5011', '2511', '9411', 'a511', '5411', '1011', '3311', '4011', '8411'],
    '1100': ['4001', '4401', 'a001', '2001', '8401', '9001', '8001', 'a501', '0001', '1001', '6001', '5001', '0401', '1401', '5401', '4201', '0201', '7401', '9501', 'b501', '9401', '6501'],
    '1610': ['7311', '7511', '3311', '9011', 'a011', 'b511', '2511', 'a511', '7011', 'b011', '3511', '5511', '0511', '6511', '6311', '9511', '5011', '1511', '6011', 'b311', '1011', '2011', '9411', '2311', '3011', 'a311', '4511'],
    '7311': ['1610', '2110', '3110', '4210', '2610', '7210', '6610', '5210', '0210', 'a610', '0610', '1110', '9210', '1210', '7610', '5610', '2210', '6210', 'a210', '9610', '7110'],
    '7511': ['2610', '2110', '3110', '1610', '1210', '3210', '7210', '6110', '7110', '7710', '3610', 'a110', 'b110', '7610', '0610', 'a610', '1110', '6610', '9610', '5110', '4210', 'b610', '3710', '2210', '0210', '5610', '9210', '9110', '5210', 'a210', '4610'],
    '2610': ['7511', 'b511', '3311', 'a011', '7011', '7311', '6011', '2511', '1511', 'b011', 'a511', '6511', '3511', '3011', '9511', '2011', '9011', '1011', 'a411', '9411', '5011', '5311'],
    '4401': ['1700', '2700', '0100', '1100', '4700', '7300', '2300', '0600', '0300', '4100', '5700', '6700', '5100', '8100', '9100', '3700', '0700', '2100', '6100', '9700', '8700', 'a700', '1300', '3300', '5300', 'a300', 'a100', '4600', '4300', '6300', '8600'],
    '1700': ['4401', '8401', '9001', 'a001', '0401', '4201', '5201', '5001', '5401', '1401', '8001', '4001', '1001', 'a401', '9401', '0201', '2001', 'a501', '7401', '6001'],
    '2700': ['9001', '0201', 'a001', '9401', '4401', '8401', '4201', '5401', 'a401', '2401', '0401', '1401', '6401', '8001', '5001', '6001', '4001', '8201', '7401', '2001', '1001', '1201', '9201', 'a501', '0001'],
    'a011': ['2610', '1610', '2110', '3710', '3110', '7710', '1110', '5110', '5610', 'a710', '9110', 'a110', '9710', 'b710', '7110', '9610', '0610', '4610', '6110', 'b110', '2710', '6610', 'a610', '0210', '8110', '6710', '0110', '7610'],
    'b511': ['2610', '3110', '3710', '1610', '2110', '5610', '7610', '7710', '3210', '4610', '0210', '8210', '9610', '7110', '6110', 'a110', '9110', 'b110', '0610', '1110', 'a610', 'b610', '6610', '4210', '5210', '9210', '6210', '1210', '8610', '3610'],
    '9001': ['1700', '1100', '0600', '2700', '4100', '4600', '0100', '2100', '6700', '6100', 'a100', '9100', '8100', '4700', '7700', '8700', '3700', '9700', '5600', '5100', 'b700', 'b100', '9600', '1600', 'a700', '3300', '8600'],
    '8401': ['0100', '0600', '5100', '4600', '2700', '1100', '1700', '3700', '7300', '0300', 'a700', '0700', '4700', '4100', '6700', '9100', '8100', 'a100', '2100', '9700', '3300', '8700', '8600', '2300', '5700', 'a300', '6100', '5300', '6300'],
    'b011': ['2610', '1610', '3710', '2110', '6610', '7110', '5610', '3110', '9610', '1110', 'a110', '5110', 'b110', 'a610', '7710', '0210', 'b710', '1210', '9110', '6110', 'a710', '0610', '7610'],
    '8001': ['1700', '2700', '5700', '1100', '2100', '4100', '0100', '6100', '5100', '6700', '9100', '9700', '8100', '9300', '8700', 'a100', '4700', '0600', '4600', '8600', '2300', 'a700', '7700', '3700', '9600', '0700'],
    '6700': ['0201', '8401', '4401', '9401', '8001', '0401', 'a501', '4001', '9001', '5401', '1401'],
    '3311': ['2610', '1210', '1610', '1110', '6210', '0210', '2210', '2110', 'a610', '9210'],
    '3710': ['7011', 'b511', '7511', 'a011', 'b011', 'a411', '9011', '1411', '5411', '6411', '9411', '3411', '2011', '8411', '6011', '7411', '3011', '4411'],
    '0600': ['8401', '8001', '9001', '4401', '9501', 'a001', '1001', '2501', '0401', '6501', '1501', '0501', '4001', 'a501', '5001', '4501', '5501', '0001', '8501', '2001'],
    '4600': ['9001', 'a501', '9501', '8001', '4501', '0501', '2001', '4001', '2501', '6001', '5001', '1501', '8401', '8501', 'a001', '1001', '5501', '4401', '6501', '2401', '0001', '3501'],
    'a001': ['2700', '0600', '1600', '4600', '1100', '2100', '3700', '5600', 'a100', '7100', '4100', '6700', '7300', '0100', '5100', '9100', '1700', '6100', '3100', '9600', '7700', '4700', '6300'],
    '9011': ['3710', '2710', '2110', 'a710', '1110', '1610', '5610', '4610', '7710', '5110', '9610', '7110', '3110', '5710', '6110', '0610', '0110', '6710', 'b710', '9710', '0210'],
    '2100': ['9001', '4001', '4401', '9401', 'a001', '8401', '1001', '8001', '0001', '5001', '5401', '2001', '0201', '6001', '4201', '1401', 'a501', '0401', 'b501', '2401', '8201'],
    '1600': ['4401', '9001', '8401', '2501', 'a001', '8501', '6501', '8001', 'a501', '4001', 'b501'],
    '3011': ['1110', '2110', '1210', '3110', '7110', '2610', '5210', '4610', '1610', '4210', 'a110', '6110', '0610', 'a610', '7610'],
    '2001': ['0100', '5100', '4600', '1100', '1600', '2100', '0600', '7700', '5700', '2700', '4100', 'a100', '9100', '1700', '4700'],
    '1110': ['2011', '7011', 'a511', 'b511', '3511', '9011', 'a011', '7511', '6511', '2511', 'b011', '5011', '7311', '6011', '1011', '3011', '7411', '8411', '9411'],
    '2011': ['3710', '1610', '1110', '3110', '5110', '9710', '2610', '7110', '2110', '0110', 'a110', 'a710', 'b110', '7710', '4610', '0610', '5610', '6110'],
    '1001': ['0600', '1100', '0100', '2700', '5100', '2100', '8100', 'a100', '3100', '1700', '4100', '4600', '6700', '4700', '5700'],
    'a501': ['1600', '0600', '2100', '6600', '4600', '2600', '1100', '0100', '9600', 'a100', '5600', '9100', '7700', '3600', '8600', '2700', '4100', 'a600', '6100', '5700'],
    'a411': ['6710', '1610', '7710', '4610', '2110', '9710', 'b710', '5610', '6110', '3710', '7110', 'a710', '1110', '9110', '2710', '3110', '1710', '0610', '4710', '5710', '2610'],
    '6710': ['a011', '9411', '5411', '9011', '6011', '1411', '1011'],
    '4100': ['8001', '5001', '8501', '4001', '9001', '1001', 'a001', '9501', '6001', '0001', '8401', '2001', 'a501', '5501', '4401', '6501', '1401', '4201', '5401'],
    '6610': ['b011', '2511', '1011', '9011', 'b511', '5011', '9511', '2011', '5511', '6311', '9411', '7011', 'a011', '7511', '1511', '7311'],
    '5700': ['a001', '4401', '0201', 'a401', '8401', '9001', '5001', '4001', '6001', '1401'],
    '7110': ['b511', '7011', 'b011', 'a011', '6011', '2011', '7511', '6511', '9011', 'a411', '1011', '3011', '9411', '5411', '5011', '2511', '7311'],
    '9401': ['1100', '2700', '0600', '7300', '2100', '0100', '0300', '4700', '4600', '6700', '4100', '8600', '8700', '8100', '1700', '3700', '3300', 'a700', '7700', '6300', '9700', 'a300', '5600', '5100', '9100'],
    '2511': ['2110', '1610', '3110', '1210', '7110', '7610', '2610', '6110', '3610', '0610', 'a110', 'a610', '9610', '5610', '1110', '7710', '6710', '4610', '6610', '4210', 'a210', 'b110', '9110', 'b710', '2210', '9210'],
    'a511': ['3110', '2110', '6110', '1610', '0610', '3210', '6610', '7710', '7110', '7610', '1110', '3710', '3610', '2610', 'b610', '5610', 'b110', '5110', '9610', '0210', '4210', '9210', '2710'],
    '0201': ['2700', '2300', '0700', '2100', '9700', '4300', '1700', '4700', '4100', '8300', '1300', '8700', '1100', '3300', '5100'],
    '1210': ['7511', '3311', '3511', 'b511', '9511', '9011', '7311', '6311', '2311', '2511', 'a011', 'b311', '5011', 'b011', '7011'],
    '5610': ['b511', '3311', '7311', '7511', 'b011', 'a011', '3511', '6511', '6011', '7011', '2511'],
    '4201': ['1100', '2700', '7300', '0100', '5300', '2300', '4700', '1700', '4300', '6300', '7700', '2100', '1300', '5700', '3300', 'a700', '9100', '9300', '8300', 'a300', '5100', '9700', '0700', '6700', 'a100'],
    '0610': ['a511', '3311', 'b511', '7511', '7311', '6511', '2511', 'a011', '9511', '4511', '9011', '6311', '1311', '2311', '5011'],
    '3700': ['9401', '4201', '2201', '8401', '4401', '5001', 'a001', '5401', '7401', '0201', 'a401', '9001'],
    '5401': ['1100', '2700', '3700', '3300', '0100', '4700', '2100', 'a700', 'b700', '6700', '8100', '7300', '7700'],
    '2710': ['b511', 'a411', 'a011', '7511', '7411', '9411', '3411', '7011', '1511'],
    '1011': ['2110', '1110', '6110', '3110', '1610', '4610', '7110', 'b110', 'a110', 'b710', '7710', '0610', '6210', 'a710', '2610'],
    '4700': ['9001', '8401', '0201', '5001', '1001', '4001', '4401', '2001', '8001', '9401', 'a401', 'a001', '4201', '0401', '2401', '1201', '6001', '1401', '9501', '4501', 'a501', '0001', '5401'],
    '4610': ['7311', '9511', 'a511', '7511', 'b311', '2511', '6511', '1311', '2311', '9011', '3311', '1511', 'b511'],
    '9501': ['7700', '2700', '4600', '1100', '5100', '6700', '9600', '8600', 'a100', '2100', 'a700', '0100', '0600', '4100', '5600', 'a600', '2600', '7600', '4700'],
    '7700': ['a401', '0201', '1401', '8401', '4201', '9401', '1201', 'a001'],
    'a401': ['8600', '5700', '0600', '1700', '2700', '1100', '9700', '4700', '4600', '7700', '6100', '4100', '2600'],
    '8600': ['4501', 'a501', '8501', '9501', '9001', '0501', '8001', '6501', '4001', '2001'],
    '7300': ['4201', '0201', '1201', '8201', '5201', '8401', '9401', '4401', '9201'],
    '4210': ['7311', 'b511', '5511', 'a511', '3311', 'b311', '7511', '6311', '9311', '2311', 'a311', '9011', '4511'],
    'a311': ['1610', '1110', '5610', '9610', '7610', '3110'],
    '2300': ['0201', '4201', '1401', '4401', '8001', '8401', '1201', '9001', '9401', 'a001', '4001', '7401', '8201', '6001'],
    'a710': ['b511', 'a411', 'b411', '9411', '4411', '6011', '1011', '7011', '7411', 'b011', '9011', '5011', '2011', '3411', '2411'],
    '7610': ['a011', '3511', '7511', '2511', '9511', 'b511', '6511', 'b011', 'a511', '3011', 'a411', '2011', '6011', '9011', '5011', '7011', '2311', '7311', '9311'],
    '7710': ['a011', 'b511', '9411', 'a411', 'b411', '6011', 'b011', '7411', '3411', '7011', '9011', '7511', '3011', 'a511', '2011', '2411', '5411', '1011', '6411', '1511', '8411', '1411', '2511', '0411', '5011'],
    '9511': ['7710', '4610', '1110', '3610', '2610', 'a610', '7610', '1610', '3710', '5610', '2110', '0610', '5110', '7110', '2710', 'a710'],
    '0110': ['9011', '5011', 'a511', '5511', '3011', '5411'],
    '0001': ['1700', '1100', '0100', '2700', '4100', '2100', '7700', '5100', '4700', '9100'],
    '0700': ['8001', '0201', '0401', '1401', 'a001', '2401', '6401', '4401', '8401', '9001', 'a401', '1001', '4001', '5001', '9401'],
    '3210': ['7511', 'b511', 'a511'],
    '0300': ['4401', '8401', '9401'],
    '5210': ['7311', 'b511', 'b311', '7511', '2311', '3311', '6511'],
    '9100': ['0201', '4401', '0401', '8401', '9001', '4001', '8001', '0001', 'a501', '6001', 'a001', '4501'],
    'a700': ['8401', '9401', '4401', '4201', '1401', '9501', 'a001', '9001', '8001', '6001'],
    '3511': ['7610', '1610', '3610', '7110', '3110', '2110', '6110', '2610', '1110', '5110', 'a610', '1210', '0210', 'a110', '9110', '4610'],
    '2311': ['1210', '1610', '2610', '6610', '4610', '8610', '0210', '4210', '7610', '0610', 'a210', '1110', '3610', '3110', '2110', '7110'],
    '6600': ['4501', '8501', '8001', '4001'],
    '4501': ['8600', '4600', '0600', '2700', '9600', '4100', '1600', '2100', '1100', '6100', '1700'],
    '5511': ['7610', 'a210', 'a110', '2210', '3110', '6610'],
    '0511': ['4610'],
    '2501': ['2600', '0600', '4600', '6100', '5700'],
    '6300': ['8401', '0401', '4201', '4401', '9401', '0201'],
    '3300': ['4401', '8401', '4201', '6401', 'a401', '1201', '9401', '1401', '9001', '0201', '5201'],
    '0210': ['b511', '6511', '7511', 'a011', 'a311', '5511', '2311', '2511', '7311', 'a511', '3311', '9011', '1311', 'b311', '1511'],
    '1401': ['0100', '4100', '1100', '6700', '1700', '0700', '9100', '2700', '3300', '2100', '2300', 'b700', '4600', '1300', '9700', '4700', '8700', 'a100', '3700', '9600', '0600', '7700', '8600', '0300'],
    '9411': ['1110', 'a710', '6710', '0610', 'b710', '2110', '7710', '9110', 'a110', '3710', '0710', '4610', '5710', '2710', '7110', '9710', '1710', '6610', '3110', '5110', '1610', '6110'],
    '5001': ['2700', '3300', '0100', '1100', '6700', 'a100', '4100', '2100', '0600', '3700', '7300', '9100', '5100', '5700', '4600', '1600', '1700', '6100', '3100', '2300', 'a300', 'a700'],
    '3610': ['a011', '7511', '3511', '7011', '9511', 'b511', '5511', '9011', 'a511', '2011', '1511'],
    '0401': ['4100', '2300', '2700', '4300', '2100', '4700', '9100', '7700', '5100', '0700', '1700', '0100', '1100', '9700', 'a300', 'a100'],
    'b710': ['7011', 'b411', 'a411', '7411', '3411', 'a011', '5011', '5411', 'b511', '9011', '9411', '7511', 'b011'],
    '1511': ['3110', '0210', '3710', '5110', '5610', '7710', 'b710', '9210', '1610', '2110', '1210', '4210', '3610', '2610', '0610', '2710', 'a710'],
    'b311': ['9210', '5610', '1610', '4610', '8210', '1210', '4210', '2610', 'b210', '7610'],
    '5300': ['a401', '2401', '6201'],
    '5411': ['7710', '2710', '3710', '3110', '6710', '2110', '4110'],
    '6501': ['4600', '0600', '4100', '0100', '2100'],
    '1411': ['3710', '3110', '7710', '7110', 'a610'],
    '2401': ['0600', '1700', '4100', '1300', '4600', '8600', '7700', '1100', '0100', '2300', '7300', '2700', '3300', '3700'],
    '6511': ['4210', '4610', '2110', '2610', '3110', '1610', '6110', '0610', '5110', '1110', '9110', '9610', '7710', '5210', '0210', '5610', 'a110'],
    '4300': ['9001', '9401', '8401', '4201', '5201', '4401'],
    '7210': ['7311', 'a011', 'b511', '7511', 'b311'],
    '6311': ['1610', '5210', '0210', '2110', '2610'],
    '1501': ['0600', '4600', '1100'],
    '9610': ['b511', '7311', '7511', 'a511', '6511', '3311', 'a011', '9011', '2511', '5011'],
    '2201': ['5300', '4300', '9300', '1300', '1700'],
    '6110': ['9011', '7511', '1011', 'b511', 'b011', '3511', '5011', 'a011', '9411', '6011', '7011', '2511'],
    '5600': ['a501', '9001', 'a001'],
    '1300': ['5401', '8401', '2201', '0201', '4201', '4401', '1201', '0401', '4001', '9401'],
    '9210': ['b511', 'a311', 'b311', '7311', '2311', '7511', 'a511', '9511'],
    '6001': ['0100', '8100', '1700', '4600', '0700', '1100', '0600', '9100', '2100', '4100', '1600', '6300', '2700'],
    'b411': ['2710', '1610', 'b710', '1110', 'a110', 'a710', '7710', '0610', '1710', '9110', '2110', '6710'],
    '6011': ['1610', '3110', '5610', '9710', '1110', '2110', '4610', '4210', '0610', '3710', '2610', '6110', '5110', '9110', '0110', '7710', '7110', 'b710', 'a710', '0210', '5210'],
    '5100': ['1401', 'a501', '0001', '4401', '9001', '0401', '4001', '8401', 'a001', '8001', '2001', '5001', '6001'],
    '6100': ['8001', '4401', '8401', '1001', '4001', '4201', '0401', '9001', '6001', '5401', '1401'],
    'b110': ['a011', '9011', '7011', '6011', '9411', '2011', 'b011', '3411', '5011'],
    '9600': ['9501', '8501', '8001', '4501', 'a501', '8401', '4401', '4001', '1501'],
    '5110': ['7511', '7011', '4011', '3511', '9011', '3011', 'b011', 'b511', 'a011', 'a511', '5011', '2511', '7311'],
    '8100': ['9001', '5001', '4001', 'a001', '6001', '9401', '8001', '1001'],
    '6401': ['4600', '5300', '4700', '0100'],
    '5501': ['a600', '2100', '7700', '3700', '2700'],
    'a600': ['0401', '9501', '6001', '4401'],
    '9710': ['3511', 'a411', 'a011', '7511', '6011'],
    'a100': ['4401', '9401', '5401', '0401', '4001', '6001', '5001', '9001', '8401', '1401', '2001'],
    '8501': ['8600', '2700', '1100', '4600', '2600', '9600', '1700', '2100'],
    '7100': ['2001', '1401'],
    '4011': ['4110', '1110', '2110', '1610'],
    '4110': ['1011'],
    '9110': ['a511', '7511', 'a011', 'b011', '2011', '5011', 'b411', '2511', '6011', '7311', '1011', '3511', 'a411'],
    'a110': ['5511', '7511', '9011', 'a011', 'b511', '2511', 'b011', '7011', '9411', '5011', '6011', '3011', '2011'],
    'a610': ['7511', '6011', '9011', '2511', '7011', '9511', 'b511', '9411', '3011', '7311', 'a011', '3511'],
    '5011': ['1610', '7110', '2110', '7710', '3610', '1110', '3110', '2710', '3710', '7210', 'a710', '6710', '6610', 'b110', '7610'],
    '7411': ['7710', '2710', '1610', '1710', 'b710', '3710', '1110', '2110', '9610'],
    '3411': ['3710', 'b710', '7710', 'a110', '1110', '1610', '3110'],
    '0501': ['0600', '8600', '4600', '9100', '2700', '2100'],
    '9700': ['4401', '8401', 'a401', '0401', '9001', '4201', '1401', '0001', '5401', '1201'],
    '8700': ['4401', '8401', '9401', '4001', '9001', '1001', 'a401', 'a001'],
    'b610': ['b511', 'a011', '7011', 'a511', '7511', '3511'],
    '8201': ['2700', '7300', 'a300', 'b300', 'b700', '4700', '1700'],
    '8210': ['b311', '7311', '7511'],
    '1201': ['2300', '0700', '2700', 'a300', '6700', '6300', '4300', '7300', '3300', '4700', '0100', '5700'],
    '5710': ['7411', 'b411', 'b011', 'a411', '9411'],
    '5311': ['6210', '2610', '0210'],
    '6210': ['8311', '5311', 'a011', '1311', '9011', '7311', 'a511'],
    '8311': ['9210'],
    '5201': ['2700', '5100', '7300', '2100', '9300'],
    '2210': ['1311', '7511', '3311', '7311', '2311', 'a011', 'b511', '7011', '2511', 'a311', '5011'],
    '6201': ['5300', '4700'],
    '1311': ['3610', '8610', 'a610', '2210', '7610'],
    '9311': ['a210', '4210', '0110'],
    '1710': ['9411', 'a411', '7411', 'b411', '7011', 'b011'],
    'a300': ['9201', '2401', '8401', '4201', '8201', '4401', 'a401', '9401', '1201'],
    'b300': ['4201'],
    '7401': ['9700', '1100', '2700', '1600'],
    '3100': ['2001', '9401', 'a001'],
    'b700': ['2201', '1201', '0401'],
    'a210': ['1311', '7311', '6311', '9311', '9011', '9511'],
    '8610': ['1511', '2511', '7511'],
    '2600': ['8501', '1501', '4501', '1401'],
    '3600': ['0401'],
    '0710': ['a411'],
    '4710': ['7511'],
    '7600': ['8001', '9501'],
    '8110': ['b011'],
    'b100': ['5401'],
    '4511': ['2110', '7710', '3710', '2210', '6710'],
    '2411': ['7710', '2110', '5110'],
    '9300': ['a201', '4201'],
    '6411': ['9710', '1610', '1110', '4610'],
    '8300': ['4201', '4401'],
    '9201': ['9700'],
    '8411': ['7710', '1110', '2710', '9710'],
    'b501': ['2100', '4600', '4100'],
    'b210': ['7511'],
    '4411': ['2610']
}
FIRST_RIGHT_NOTE = '2110'
FIRST_LEFT_NOTE = '9001'
START_BEAT = 4


# work off probabilities
def mapDifficulty(songFolderName, difficulty, style, numBeats=200):
    dat = open(songFolderName+'\\'+difficulty+style+'.dat', 'r')
    datJSON = json.load(dat)
    dat.close()
    dat = open(songFolderName+'\\'+difficulty+style+'.dat', 'w')
    placingLeftNote = random.randint(0, 1) == 1
    placingRightNote = random.randint(0, 1) == 1

    noteTimes = times('look.dat')  # Temporary placeholder value

    datJSON['_notes'] = [nJ(FIRST_RIGHT_NOTE, noteTimes[0]), nJ(FIRST_LEFT_NOTE, noteTimes[1])]
    lastNotes = {
        '0': FIRST_LEFT_NOTE,
        '1': FIRST_RIGHT_NOTE,
        '-1': FIRST_LEFT_NOTE
    }

    for nt in noteTimes[2:]:
        if placingRightNote and placingLeftNote:
            dominance = random.randint(0, 1)
            while True:
                note1 = generateNote(lastNotes['-1'], lastNotes[str(dominance)])
                note2 = generateNote(note1, lastNotes[str(dominance ^ 1)])
                if not isBadDouble(note1, note2):
                    break
            lastNotes[str(dominance)] = note1
            lastNotes[str(dominance ^ 1)] = note2
            datJSON['_notes'].append(nJ(note1, nt))
            datJSON['_notes'].append(nJ(note2, nt))
            lastNotes['-1'] = note2
        elif placingRightNote:
            nextRightNote = generateNote(lastNotes['-1'], lastNotes['1'])
            datJSON['_notes'].append(nJ(nextRightNote, nt))
            lastNotes['1'] = nextRightNote
            lastNotes['-1'] = nextRightNote
        elif placingLeftNote:
            nextLeftNote = generateNote(lastNotes['-1'], lastNotes['0'])
            datJSON['_notes'].append(nJ(nextLeftNote, nt))
            lastNotes['0'] = nextLeftNote
            lastNotes['-1'] = nextLeftNote
        placingRightNote, placingLeftNote = determinePlacingNotes(nt, noteTimes)
    # Dump new notes json into difficulty.dat
    json.dump(datJSON, dat)


def generateNote(prevNote, prevHandedNote):
    while True:
        nextNote = noteDict[prevHandedNote][random.randint(0, len(noteDict[prevHandedNote]) - 1)]
        if not isBadNote(prevNote, nextNote):
            break
    return nextNote


def isBadDouble(note1, note2):
    if note2[0] in cP(note1) or note1[0] in cP(note2):
        return True
    return False


def isBadNote(prevNote, currNote):
    return isVisionBlock(prevNote, currNote) or isOppositeColumn(prevNote, currNote)


def isVisionBlock(prevNote, currNote):
    # opposite hands, same coordinate is a vision block
    return prevNote[0] == currNote[0] and prevNote[2] != currNote[2]


def isOppositeColumn(prevNote, currNote):
    if prevNote[2] == currNote[2]:
        return False
    prevOC = int(prevNote[0], 16) % 4 not in [3 * int(prevNote[2]), 2, 1]
    currOC = int(currNote[0], 16) % 4 not in [3 * int(currNote[2]), 2, 1]
    if prevOC and currOC:
        return True
    return False


def determinePlacingNotes(time, times):
    i = times.index(time)
    # if notes are too close together it will only place one of the two notes
    if times[i-1] >= time - 0.25 and times[i+1] <= time + 0.25:
        return [(True, False), (False, True)][random.randint(0, 1)]
    else:
        return [(True, False), (False, True), (True, True)][random.randint(0, 2)]
        